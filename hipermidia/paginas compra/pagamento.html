<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Pagamento</title>
    <link rel="stylesheet" href="pagamento.css">
</head>
<body>

<header class="top-bar">
    <a href="checkout.html">← Voltar</a>
</header>

<main class="container">

    <div class="steps">
        <div class="step done">1 Informações</div>
        <div class="step active">2 Pagamento</div>
    </div>

    <div class="layout">

        <!-- PAGAMENTO -->
        <div class="card">
            <h3>Método de Pagamento</h3>

            <label>Número do Cartão</label>
            <input>

            <label>Nome no Cartão</label>
            <input>

            <div class="row">
                <input placeholder="MM/AA">
                <input placeholder="CVV">
            </div>

            <button class="btn-primary" onclick="finalizar()">
                Finalizar Pedido
            </button>
        </div>

        <!-- RESUMO -->
        <div class="card">
            <h3>Resumo</h3>
            <div id="resumo"></div>
            <hr>
            <p><strong>Total:</strong> <span id="total"></span></p>
        </div>

    </div>
</main>

<script>
function obterCarrinho() {
    return JSON.parse(localStorage.getItem("carrinho")) || [];
}

function carregarResumo() {
    const carrinho = obterCarrinho();
    const frete = Number(localStorage.getItem("frete")) || 0;
    let subtotal = 0;
    const r = document.getElementById("resumo");

    r.innerHTML = "";

    carrinho.forEach(i => {
        subtotal += i.preco * i.qtd;
        r.innerHTML += `<p>${i.nome} x${i.qtd}</p>`;
    });

    document.getElementById("total").innerText =
        `R$ ${(subtotal + frete).toFixed(2)}`;
}

function finalizar() {
    alert("✅ Pedido realizado!");
    localStorage.removeItem("carrinho");
    localStorage.removeItem("checkout");
    localStorage.removeItem("frete");
}

carregarResumo();
</script>

</body>
</html>
